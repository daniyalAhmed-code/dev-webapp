{"ast":null,"code":"import _createForOfIteratorHelper from \"@babel/runtime-corejs3/helpers/createForOfIteratorHelper\";\nimport _typeof from \"@babel/runtime-corejs3/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime-corejs3/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs3/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs3/regenerator\";\nimport _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";\nimport _entriesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/entries\";\nimport _Array$from from \"@babel/runtime-corejs3/core-js-stable/array/from\";\nimport _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";\nimport _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";\nimport _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";\nimport _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";\nimport _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";\nimport _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";\nimport 'cross-fetch/polyfill';\n/* global fetch */\n\nimport qs from 'qs';\nimport jsYaml from 'js-yaml';\nimport { FormData, File, Blob } from 'formdata-node';\nimport { encodeDisallowedCharacters } from '../execute/oas3/style-serializer';\nimport foldFormDataToRequest from './fold-formdata-to-request.node'; // For testing\n\nexport var self = {\n  serializeRes: serializeRes,\n  mergeInQueryOrForm: mergeInQueryOrForm\n}; // Handles fetch-like syntax and the case where there is only one object passed-in\n// (which will have the URL as a property). Also serilizes the response.\n\nexport default function http(_x) {\n  return _http.apply(this, arguments);\n} // exported for testing\n\nfunction _http() {\n  _http = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var request,\n        contentType,\n        res,\n        error,\n        _error,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            request = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (_typeof(url) === 'object') {\n              request = url;\n              url = request.url;\n            }\n\n            request.headers = request.headers || {}; // Serializes query, for convenience\n            // Should be the last thing we do, as its hard to mutate the URL with\n            // the search string, but much easier to manipulate the req.query object\n\n            self.mergeInQueryOrForm(request); // Newlines in header values cause weird error messages from `window.fetch`,\n            // so let's massage them out.\n            // Context: https://stackoverflow.com/a/50709178\n\n            if (request.headers) {\n              _Object$keys(request.headers).forEach(function (headerName) {\n                var value = request.headers[headerName];\n\n                if (typeof value === 'string') {\n                  request.headers[headerName] = value.replace(/\\n+/g, ' ');\n                }\n              });\n            } // Wait for the request interceptor, if it was provided\n            // WARNING: don't put anything between this and the request firing unless\n            // you have a good reason!\n\n\n            if (!request.requestInterceptor) {\n              _context6.next = 12;\n              break;\n            }\n\n            _context6.next = 8;\n            return request.requestInterceptor(request);\n\n          case 8:\n            _context6.t0 = _context6.sent;\n\n            if (_context6.t0) {\n              _context6.next = 11;\n              break;\n            }\n\n            _context6.t0 = request;\n\n          case 11:\n            request = _context6.t0;\n\n          case 12:\n            // for content-type=multipart\\/form-data remove content-type from request before fetch\n            // so that correct one with `boundary` is set when request body is different than boundary encoded string\n            contentType = request.headers['content-type'] || request.headers['Content-Type']; // TODO(vladimir.gorej@gmail.com): assertion of FormData instance can be removed when migrated to node-fetch@2.x\n\n            if (/multipart\\/form-data/i.test(contentType) && request.body instanceof FormData) {\n              delete request.headers['content-type'];\n              delete request.headers['Content-Type'];\n            } // eslint-disable-next-line no-undef\n\n\n            _context6.prev = 14;\n            _context6.next = 17;\n            return (request.userFetch || fetch)(request.url, request);\n\n          case 17:\n            res = _context6.sent;\n            _context6.next = 20;\n            return self.serializeRes(res, url, request);\n\n          case 20:\n            res = _context6.sent;\n\n            if (!request.responseInterceptor) {\n              _context6.next = 28;\n              break;\n            }\n\n            _context6.next = 24;\n            return request.responseInterceptor(res);\n\n          case 24:\n            _context6.t1 = _context6.sent;\n\n            if (_context6.t1) {\n              _context6.next = 27;\n              break;\n            }\n\n            _context6.t1 = res;\n\n          case 27:\n            res = _context6.t1;\n\n          case 28:\n            _context6.next = 39;\n            break;\n\n          case 30:\n            _context6.prev = 30;\n            _context6.t2 = _context6[\"catch\"](14);\n\n            if (res) {\n              _context6.next = 34;\n              break;\n            }\n\n            throw _context6.t2;\n\n          case 34:\n            error = new Error(res.statusText || \"response status is \".concat(res.status));\n            error.status = res.status;\n            error.statusCode = res.status;\n            error.responseError = _context6.t2;\n            throw error;\n\n          case 39:\n            if (res.ok) {\n              _context6.next = 45;\n              break;\n            }\n\n            _error = new Error(res.statusText || \"response status is \".concat(res.status));\n            _error.status = res.status;\n            _error.statusCode = res.status;\n            _error.response = res;\n            throw _error;\n\n          case 45:\n            return _context6.abrupt(\"return\", res);\n\n          case 46:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee, null, [[14, 30]]);\n  }));\n  return _http.apply(this, arguments);\n}\n\nexport var shouldDownloadAsText = function shouldDownloadAsText() {\n  var contentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return /(json|xml|yaml|text)\\b/.test(contentType);\n};\n\nfunction parseBody(body, contentType) {\n  if (contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('+json') > 0)) {\n    return JSON.parse(body);\n  }\n\n  return jsYaml.load(body);\n} // Serialize the response, returns a promise with headers and the body part of the hash\n\n\nexport function serializeRes(oriRes, url) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref$loadSpec = _ref.loadSpec,\n      loadSpec = _ref$loadSpec === void 0 ? false : _ref$loadSpec;\n\n  var res = {\n    ok: oriRes.ok,\n    url: oriRes.url || url,\n    status: oriRes.status,\n    statusText: oriRes.statusText,\n    headers: serializeHeaders(oriRes.headers)\n  };\n  var contentType = res.headers['content-type'];\n  var useText = loadSpec || shouldDownloadAsText(contentType);\n  var getBody = useText ? oriRes.text : oriRes.blob || oriRes.buffer;\n  return getBody.call(oriRes).then(function (body) {\n    res.text = body;\n    res.data = body;\n\n    if (useText) {\n      try {\n        var obj = parseBody(body, contentType);\n        res.body = obj;\n        res.obj = obj;\n      } catch (e) {\n        res.parseError = e;\n      }\n    }\n\n    return res;\n  });\n}\n\nfunction serializeHeaderValue(value) {\n  var isMulti = _includesInstanceProperty(value).call(value, ', ');\n\n  return isMulti ? value.split(', ') : value;\n} // Serialize headers into a hash, where mutliple-headers result in an array.\n//\n// eg: Cookie: one\n//     Cookie: two\n//  =  { Cookie: [ \"one\", \"two\" ]\n\n\nexport function serializeHeaders() {\n  var headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof _entriesInstanceProperty(headers) !== 'function') return {};\n  return _Array$from(_entriesInstanceProperty(headers).call(headers)).reduce(function (acc, _ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        header = _ref3[0],\n        value = _ref3[1];\n\n    acc[header] = serializeHeaderValue(value);\n    return acc;\n  }, {});\n}\nexport function isFile(obj, navigatorObj) {\n  if (!navigatorObj && typeof navigator !== 'undefined') {\n    // eslint-disable-next-line no-undef\n    navigatorObj = navigator;\n  }\n\n  if (navigatorObj && navigatorObj.product === 'ReactNative') {\n    if (obj && _typeof(obj) === 'object' && typeof obj.uri === 'string') {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (typeof File !== 'undefined' && obj instanceof File) {\n    return true;\n  }\n\n  if (typeof Blob !== 'undefined' && obj instanceof Blob) {\n    return true;\n  }\n\n  if (ArrayBuffer.isView(obj)) {\n    return true;\n  }\n\n  return obj !== null && _typeof(obj) === 'object' && typeof obj.pipe === 'function';\n}\n\nfunction isArrayOfFile(obj, navigatorObj) {\n  return Array.isArray(obj) && obj.some(function (v) {\n    return isFile(v, navigatorObj);\n  });\n}\n\nvar STYLE_SEPARATORS = {\n  form: ',',\n  spaceDelimited: '%20',\n  pipeDelimited: '|'\n};\nvar SEPARATORS = {\n  csv: ',',\n  ssv: '%20',\n  tsv: '%09',\n  pipes: '|'\n}; // Formats a key-value and returns an array of key-value pairs.\n//\n// Return value example 1: [['color', 'blue']]\n// Return value example 2: [['color', 'blue,black,brown']]\n// Return value example 3: [['color', ['blue', 'black', 'brown']]]\n// Return value example 4: [['color', 'R,100,G,200,B,150']]\n// Return value example 5: [['R', '100'], ['G', '200'], ['B', '150']]\n// Return value example 6: [['color[R]', '100'], ['color[G]', '200'], ['color[B]', '150']]\n\nfunction formatKeyValue(key, input) {\n  var skipEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var collectionFormat = input.collectionFormat,\n      allowEmptyValue = input.allowEmptyValue,\n      serializationOption = input.serializationOption,\n      encoding = input.encoding; // `input` can be string\n\n  var value = _typeof(input) === 'object' && !Array.isArray(input) ? input.value : input;\n  var encodeFn = skipEncoding ? function (k) {\n    return k.toString();\n  } : function (k) {\n    return encodeURIComponent(k);\n  };\n  var encodedKey = encodeFn(key);\n\n  if (typeof value === 'undefined' && allowEmptyValue) {\n    return [[encodedKey, '']];\n  } // file\n\n\n  if (isFile(value) || isArrayOfFile(value)) {\n    return [[encodedKey, value]];\n  } // for OAS 3 Parameter Object for serialization\n\n\n  if (serializationOption) {\n    return formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption);\n  } // for OAS 3 Encoding Object\n\n\n  if (encoding) {\n    if ([_typeof(encoding.style), _typeof(encoding.explode), _typeof(encoding.allowReserved)].some(function (type) {\n      return type !== 'undefined';\n    })) {\n      var style = encoding.style,\n          explode = encoding.explode,\n          allowReserved = encoding.allowReserved;\n      return formatKeyValueBySerializationOption(key, value, skipEncoding, {\n        style: style,\n        explode: explode,\n        allowReserved: allowReserved\n      });\n    }\n\n    if (encoding.contentType) {\n      if (encoding.contentType === 'application/json') {\n        // If value is a string, assume value is already a JSON string\n        var json = typeof value === 'string' ? value : _JSON$stringify(value);\n        return [[encodedKey, encodeFn(json)]];\n      }\n\n      return [[encodedKey, encodeFn(value.toString())]];\n    } // Primitive\n\n\n    if (_typeof(value) !== 'object') {\n      return [[encodedKey, encodeFn(value)]];\n    } // Array of primitives\n\n\n    if (Array.isArray(value) && value.every(function (v) {\n      return _typeof(v) !== 'object';\n    })) {\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(',')]];\n    } // Array or object\n\n\n    return [[encodedKey, encodeFn(_JSON$stringify(value))]];\n  } // for OAS 2 Parameter Object\n  // Primitive\n\n\n  if (_typeof(value) !== 'object') {\n    return [[encodedKey, encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (collectionFormat === 'multi') {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(SEPARATORS[collectionFormat || 'csv'])]];\n  } // Object\n\n\n  return [[encodedKey, '']];\n}\n\nfunction formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption) {\n  var _context4;\n\n  var style = serializationOption.style || 'form';\n  var explode = typeof serializationOption.explode === 'undefined' ? style === 'form' : serializationOption.explode; // eslint-disable-next-line no-nested-ternary\n\n  var escape = skipEncoding ? false : serializationOption && serializationOption.allowReserved ? 'unsafe' : 'reserved';\n\n  var encodeFn = function encodeFn(v) {\n    return encodeDisallowedCharacters(v, {\n      escape: escape\n    });\n  };\n\n  var encodeKeyFn = skipEncoding ? function (k) {\n    return k;\n  } : function (k) {\n    return encodeDisallowedCharacters(k, {\n      escape: escape\n    });\n  }; // Primitive\n\n  if (_typeof(value) !== 'object') {\n    return [[encodeKeyFn(key), encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (explode) {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn).join(STYLE_SEPARATORS[style])]];\n  } // Object\n\n\n  if (style === 'deepObject') {\n    var _context;\n\n    return _mapInstanceProperty(_context = _Object$keys(value)).call(_context, function (valueKey) {\n      var _context2;\n\n      return [encodeKeyFn(_concatInstanceProperty(_context2 = \"\".concat(key, \"[\")).call(_context2, valueKey, \"]\")), encodeFn(value[valueKey])];\n    });\n  }\n\n  if (explode) {\n    var _context3;\n\n    return _mapInstanceProperty(_context3 = _Object$keys(value)).call(_context3, function (valueKey) {\n      return [encodeKeyFn(valueKey), encodeFn(value[valueKey])];\n    });\n  }\n\n  return [[encodeKeyFn(key), _mapInstanceProperty(_context4 = _Object$keys(value)).call(_context4, function (valueKey) {\n    var _context5;\n\n    return [_concatInstanceProperty(_context5 = \"\".concat(encodeKeyFn(valueKey), \",\")).call(_context5, encodeFn(value[valueKey]))];\n  }).join(',')]];\n}\n\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return _Object$entries(reqForm).reduce(function (formData, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        name = _ref5[0],\n        input = _ref5[1]; // eslint-disable-next-line no-restricted-syntax\n\n\n    var _iterator = _createForOfIteratorHelper(formatKeyValue(name, input, true)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            key = _step$value[0],\n            value = _step$value[1];\n\n        if (Array.isArray(value)) {\n          // eslint-disable-next-line no-restricted-syntax\n          var _iterator2 = _createForOfIteratorHelper(value),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var v = _step2.value;\n\n              if (ArrayBuffer.isView(v)) {\n                var blob = new Blob([v]);\n                formData.append(key, blob);\n              } else {\n                formData.append(key, v);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else if (ArrayBuffer.isView(value)) {\n          var _blob = new Blob([value]);\n\n          formData.append(key, _blob);\n        } else {\n          formData.append(key, value);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return formData;\n  }, new FormData());\n} // Encodes an object using appropriate serializer.\n\n\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  var encodedQuery = _Object$keys(data).reduce(function (result, parameterName) {\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator3 = _createForOfIteratorHelper(formatKeyValue(parameterName, data[parameterName])),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _step3$value = _slicedToArray(_step3.value, 2),\n            key = _step3$value[0],\n            value = _step3$value[1];\n\n        result[key] = value;\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    return result;\n  }, {});\n\n  return qs.stringify(encodedQuery, {\n    encode: false,\n    indices: false\n  }) || '';\n} // If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\n\nexport function mergeInQueryOrForm() {\n  var req = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _req$url = req.url,\n      url = _req$url === void 0 ? '' : _req$url,\n      query = req.query,\n      form = req.form;\n\n  var joinSearch = function joinSearch() {\n    for (var _len = arguments.length, strs = new Array(_len), _key = 0; _key < _len; _key++) {\n      strs[_key] = arguments[_key];\n    }\n\n    var search = _filterInstanceProperty(strs).call(strs, function (a) {\n      return a;\n    }).join('&'); // Only truthy value\n\n\n    return search ? \"?\".concat(search) : ''; // Only add '?' if there is a str\n  };\n\n  if (form) {\n    var hasFile = _Object$keys(form).some(function (key) {\n      var value = form[key].value;\n      return isFile(value) || isArrayOfFile(value);\n    });\n\n    var contentType = req.headers['content-type'] || req.headers['Content-Type'];\n\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      var formdata = buildFormData(req.form);\n      foldFormDataToRequest(formdata, req);\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n\n    delete req.form;\n  }\n\n  if (query) {\n    var _url$split = url.split('?'),\n        _url$split2 = _slicedToArray(_url$split, 2),\n        baseUrl = _url$split2[0],\n        oriSearch = _url$split2[1];\n\n    var newStr = '';\n\n    if (oriSearch) {\n      var oriQuery = qs.parse(oriSearch);\n\n      var keysToRemove = _Object$keys(query);\n\n      keysToRemove.forEach(function (key) {\n        return delete oriQuery[key];\n      });\n      newStr = qs.stringify(oriQuery, {\n        encode: true\n      });\n    }\n\n    var finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n\n  return req;\n} // Wrap a http function ( there are otherways to do this, consider this deprecated )\n\nexport function makeHttp(httpFn, preFetch, postFetch) {\n  postFetch = postFetch || function (a) {\n    return a;\n  };\n\n  preFetch = preFetch || function (a) {\n    return a;\n  };\n\n  return function (req) {\n    if (typeof req === 'string') {\n      req = {\n        url: req\n      };\n    }\n\n    self.mergeInQueryOrForm(req);\n    req = preFetch(req);\n    return postFetch(httpFn(req));\n  };\n}","map":{"version":3,"sources":["/home/daniyal/Downloads/vap-webapp (1)/vap-webapp/web-content/static-asset-uploader/node_modules/swagger-client/es/http/index.js"],"names":["_createForOfIteratorHelper","_typeof","_slicedToArray","_asyncToGenerator","_regeneratorRuntime","_includesInstanceProperty","_entriesInstanceProperty","_Array$from","_JSON$stringify","_mapInstanceProperty","_Object$keys","_concatInstanceProperty","_Object$entries","_filterInstanceProperty","qs","jsYaml","FormData","File","Blob","encodeDisallowedCharacters","foldFormDataToRequest","self","serializeRes","mergeInQueryOrForm","http","_x","_http","apply","arguments","mark","_callee","url","request","contentType","res","error","_error","_args","wrap","_callee$","_context6","prev","next","length","undefined","headers","forEach","headerName","value","replace","requestInterceptor","t0","sent","test","body","userFetch","fetch","responseInterceptor","t1","t2","Error","statusText","concat","status","statusCode","responseError","ok","response","abrupt","stop","shouldDownloadAsText","parseBody","indexOf","JSON","parse","load","oriRes","_ref","_ref$loadSpec","loadSpec","serializeHeaders","useText","getBody","text","blob","buffer","call","then","data","obj","e","parseError","serializeHeaderValue","isMulti","split","reduce","acc","_ref2","_ref3","header","isFile","navigatorObj","navigator","product","uri","ArrayBuffer","isView","pipe","isArrayOfFile","Array","isArray","some","v","STYLE_SEPARATORS","form","spaceDelimited","pipeDelimited","SEPARATORS","csv","ssv","tsv","pipes","formatKeyValue","key","input","skipEncoding","collectionFormat","allowEmptyValue","serializationOption","encoding","encodeFn","k","toString","encodeURIComponent","encodedKey","formatKeyValueBySerializationOption","style","explode","allowReserved","type","json","every","join","_context4","escape","encodeKeyFn","_context","valueKey","_context2","_context3","_context5","buildFormData","reqForm","formData","_ref4","_ref5","name","_iterator","_step","s","n","done","_step$value","_iterator2","_step2","append","err","f","_blob","encodeFormOrQuery","encodedQuery","result","parameterName","_iterator3","_step3","_step3$value","stringify","encode","indices","req","_req$url","query","joinSearch","_len","strs","_key","search","a","hasFile","formdata","_url$split","_url$split2","baseUrl","oriSearch","newStr","oriQuery","keysToRemove","finalStr","makeHttp","httpFn","preFetch","postFetch"],"mappings":"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","sourcesContent":["import _createForOfIteratorHelper from \"@babel/runtime-corejs3/helpers/createForOfIteratorHelper\";\nimport _typeof from \"@babel/runtime-corejs3/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime-corejs3/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs3/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs3/regenerator\";\nimport _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";\nimport _entriesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/entries\";\nimport _Array$from from \"@babel/runtime-corejs3/core-js-stable/array/from\";\nimport _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";\nimport _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";\nimport _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";\nimport _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";\nimport _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";\nimport _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";\nimport 'cross-fetch/polyfill';\n/* global fetch */\n\nimport qs from 'qs';\nimport jsYaml from 'js-yaml';\nimport { FormData, File, Blob } from 'formdata-node';\nimport { encodeDisallowedCharacters } from '../execute/oas3/style-serializer';\nimport foldFormDataToRequest from './fold-formdata-to-request.node'; // For testing\n\nexport var self = {\n  serializeRes: serializeRes,\n  mergeInQueryOrForm: mergeInQueryOrForm\n}; // Handles fetch-like syntax and the case where there is only one object passed-in\n// (which will have the URL as a property). Also serilizes the response.\n\nexport default function http(_x) {\n  return _http.apply(this, arguments);\n} // exported for testing\n\nfunction _http() {\n  _http = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var request,\n        contentType,\n        res,\n        error,\n        _error,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            request = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (_typeof(url) === 'object') {\n              request = url;\n              url = request.url;\n            }\n\n            request.headers = request.headers || {}; // Serializes query, for convenience\n            // Should be the last thing we do, as its hard to mutate the URL with\n            // the search string, but much easier to manipulate the req.query object\n\n            self.mergeInQueryOrForm(request); // Newlines in header values cause weird error messages from `window.fetch`,\n            // so let's massage them out.\n            // Context: https://stackoverflow.com/a/50709178\n\n            if (request.headers) {\n              _Object$keys(request.headers).forEach(function (headerName) {\n                var value = request.headers[headerName];\n\n                if (typeof value === 'string') {\n                  request.headers[headerName] = value.replace(/\\n+/g, ' ');\n                }\n              });\n            } // Wait for the request interceptor, if it was provided\n            // WARNING: don't put anything between this and the request firing unless\n            // you have a good reason!\n\n\n            if (!request.requestInterceptor) {\n              _context6.next = 12;\n              break;\n            }\n\n            _context6.next = 8;\n            return request.requestInterceptor(request);\n\n          case 8:\n            _context6.t0 = _context6.sent;\n\n            if (_context6.t0) {\n              _context6.next = 11;\n              break;\n            }\n\n            _context6.t0 = request;\n\n          case 11:\n            request = _context6.t0;\n\n          case 12:\n            // for content-type=multipart\\/form-data remove content-type from request before fetch\n            // so that correct one with `boundary` is set when request body is different than boundary encoded string\n            contentType = request.headers['content-type'] || request.headers['Content-Type']; // TODO(vladimir.gorej@gmail.com): assertion of FormData instance can be removed when migrated to node-fetch@2.x\n\n            if (/multipart\\/form-data/i.test(contentType) && request.body instanceof FormData) {\n              delete request.headers['content-type'];\n              delete request.headers['Content-Type'];\n            } // eslint-disable-next-line no-undef\n\n\n            _context6.prev = 14;\n            _context6.next = 17;\n            return (request.userFetch || fetch)(request.url, request);\n\n          case 17:\n            res = _context6.sent;\n            _context6.next = 20;\n            return self.serializeRes(res, url, request);\n\n          case 20:\n            res = _context6.sent;\n\n            if (!request.responseInterceptor) {\n              _context6.next = 28;\n              break;\n            }\n\n            _context6.next = 24;\n            return request.responseInterceptor(res);\n\n          case 24:\n            _context6.t1 = _context6.sent;\n\n            if (_context6.t1) {\n              _context6.next = 27;\n              break;\n            }\n\n            _context6.t1 = res;\n\n          case 27:\n            res = _context6.t1;\n\n          case 28:\n            _context6.next = 39;\n            break;\n\n          case 30:\n            _context6.prev = 30;\n            _context6.t2 = _context6[\"catch\"](14);\n\n            if (res) {\n              _context6.next = 34;\n              break;\n            }\n\n            throw _context6.t2;\n\n          case 34:\n            error = new Error(res.statusText || \"response status is \".concat(res.status));\n            error.status = res.status;\n            error.statusCode = res.status;\n            error.responseError = _context6.t2;\n            throw error;\n\n          case 39:\n            if (res.ok) {\n              _context6.next = 45;\n              break;\n            }\n\n            _error = new Error(res.statusText || \"response status is \".concat(res.status));\n            _error.status = res.status;\n            _error.statusCode = res.status;\n            _error.response = res;\n            throw _error;\n\n          case 45:\n            return _context6.abrupt(\"return\", res);\n\n          case 46:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee, null, [[14, 30]]);\n  }));\n  return _http.apply(this, arguments);\n}\n\nexport var shouldDownloadAsText = function shouldDownloadAsText() {\n  var contentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return /(json|xml|yaml|text)\\b/.test(contentType);\n};\n\nfunction parseBody(body, contentType) {\n  if (contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('+json') > 0)) {\n    return JSON.parse(body);\n  }\n\n  return jsYaml.load(body);\n} // Serialize the response, returns a promise with headers and the body part of the hash\n\n\nexport function serializeRes(oriRes, url) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref$loadSpec = _ref.loadSpec,\n      loadSpec = _ref$loadSpec === void 0 ? false : _ref$loadSpec;\n\n  var res = {\n    ok: oriRes.ok,\n    url: oriRes.url || url,\n    status: oriRes.status,\n    statusText: oriRes.statusText,\n    headers: serializeHeaders(oriRes.headers)\n  };\n  var contentType = res.headers['content-type'];\n  var useText = loadSpec || shouldDownloadAsText(contentType);\n  var getBody = useText ? oriRes.text : oriRes.blob || oriRes.buffer;\n  return getBody.call(oriRes).then(function (body) {\n    res.text = body;\n    res.data = body;\n\n    if (useText) {\n      try {\n        var obj = parseBody(body, contentType);\n        res.body = obj;\n        res.obj = obj;\n      } catch (e) {\n        res.parseError = e;\n      }\n    }\n\n    return res;\n  });\n}\n\nfunction serializeHeaderValue(value) {\n  var isMulti = _includesInstanceProperty(value).call(value, ', ');\n\n  return isMulti ? value.split(', ') : value;\n} // Serialize headers into a hash, where mutliple-headers result in an array.\n//\n// eg: Cookie: one\n//     Cookie: two\n//  =  { Cookie: [ \"one\", \"two\" ]\n\n\nexport function serializeHeaders() {\n  var headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof _entriesInstanceProperty(headers) !== 'function') return {};\n  return _Array$from(_entriesInstanceProperty(headers).call(headers)).reduce(function (acc, _ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        header = _ref3[0],\n        value = _ref3[1];\n\n    acc[header] = serializeHeaderValue(value);\n    return acc;\n  }, {});\n}\nexport function isFile(obj, navigatorObj) {\n  if (!navigatorObj && typeof navigator !== 'undefined') {\n    // eslint-disable-next-line no-undef\n    navigatorObj = navigator;\n  }\n\n  if (navigatorObj && navigatorObj.product === 'ReactNative') {\n    if (obj && _typeof(obj) === 'object' && typeof obj.uri === 'string') {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (typeof File !== 'undefined' && obj instanceof File) {\n    return true;\n  }\n\n  if (typeof Blob !== 'undefined' && obj instanceof Blob) {\n    return true;\n  }\n\n  if (ArrayBuffer.isView(obj)) {\n    return true;\n  }\n\n  return obj !== null && _typeof(obj) === 'object' && typeof obj.pipe === 'function';\n}\n\nfunction isArrayOfFile(obj, navigatorObj) {\n  return Array.isArray(obj) && obj.some(function (v) {\n    return isFile(v, navigatorObj);\n  });\n}\n\nvar STYLE_SEPARATORS = {\n  form: ',',\n  spaceDelimited: '%20',\n  pipeDelimited: '|'\n};\nvar SEPARATORS = {\n  csv: ',',\n  ssv: '%20',\n  tsv: '%09',\n  pipes: '|'\n}; // Formats a key-value and returns an array of key-value pairs.\n//\n// Return value example 1: [['color', 'blue']]\n// Return value example 2: [['color', 'blue,black,brown']]\n// Return value example 3: [['color', ['blue', 'black', 'brown']]]\n// Return value example 4: [['color', 'R,100,G,200,B,150']]\n// Return value example 5: [['R', '100'], ['G', '200'], ['B', '150']]\n// Return value example 6: [['color[R]', '100'], ['color[G]', '200'], ['color[B]', '150']]\n\nfunction formatKeyValue(key, input) {\n  var skipEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var collectionFormat = input.collectionFormat,\n      allowEmptyValue = input.allowEmptyValue,\n      serializationOption = input.serializationOption,\n      encoding = input.encoding; // `input` can be string\n\n  var value = _typeof(input) === 'object' && !Array.isArray(input) ? input.value : input;\n  var encodeFn = skipEncoding ? function (k) {\n    return k.toString();\n  } : function (k) {\n    return encodeURIComponent(k);\n  };\n  var encodedKey = encodeFn(key);\n\n  if (typeof value === 'undefined' && allowEmptyValue) {\n    return [[encodedKey, '']];\n  } // file\n\n\n  if (isFile(value) || isArrayOfFile(value)) {\n    return [[encodedKey, value]];\n  } // for OAS 3 Parameter Object for serialization\n\n\n  if (serializationOption) {\n    return formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption);\n  } // for OAS 3 Encoding Object\n\n\n  if (encoding) {\n    if ([_typeof(encoding.style), _typeof(encoding.explode), _typeof(encoding.allowReserved)].some(function (type) {\n      return type !== 'undefined';\n    })) {\n      var style = encoding.style,\n          explode = encoding.explode,\n          allowReserved = encoding.allowReserved;\n      return formatKeyValueBySerializationOption(key, value, skipEncoding, {\n        style: style,\n        explode: explode,\n        allowReserved: allowReserved\n      });\n    }\n\n    if (encoding.contentType) {\n      if (encoding.contentType === 'application/json') {\n        // If value is a string, assume value is already a JSON string\n        var json = typeof value === 'string' ? value : _JSON$stringify(value);\n        return [[encodedKey, encodeFn(json)]];\n      }\n\n      return [[encodedKey, encodeFn(value.toString())]];\n    } // Primitive\n\n\n    if (_typeof(value) !== 'object') {\n      return [[encodedKey, encodeFn(value)]];\n    } // Array of primitives\n\n\n    if (Array.isArray(value) && value.every(function (v) {\n      return _typeof(v) !== 'object';\n    })) {\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(',')]];\n    } // Array or object\n\n\n    return [[encodedKey, encodeFn(_JSON$stringify(value))]];\n  } // for OAS 2 Parameter Object\n  // Primitive\n\n\n  if (_typeof(value) !== 'object') {\n    return [[encodedKey, encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (collectionFormat === 'multi') {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(SEPARATORS[collectionFormat || 'csv'])]];\n  } // Object\n\n\n  return [[encodedKey, '']];\n}\n\nfunction formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption) {\n  var _context4;\n\n  var style = serializationOption.style || 'form';\n  var explode = typeof serializationOption.explode === 'undefined' ? style === 'form' : serializationOption.explode; // eslint-disable-next-line no-nested-ternary\n\n  var escape = skipEncoding ? false : serializationOption && serializationOption.allowReserved ? 'unsafe' : 'reserved';\n\n  var encodeFn = function encodeFn(v) {\n    return encodeDisallowedCharacters(v, {\n      escape: escape\n    });\n  };\n\n  var encodeKeyFn = skipEncoding ? function (k) {\n    return k;\n  } : function (k) {\n    return encodeDisallowedCharacters(k, {\n      escape: escape\n    });\n  }; // Primitive\n\n  if (_typeof(value) !== 'object') {\n    return [[encodeKeyFn(key), encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (explode) {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn).join(STYLE_SEPARATORS[style])]];\n  } // Object\n\n\n  if (style === 'deepObject') {\n    var _context;\n\n    return _mapInstanceProperty(_context = _Object$keys(value)).call(_context, function (valueKey) {\n      var _context2;\n\n      return [encodeKeyFn(_concatInstanceProperty(_context2 = \"\".concat(key, \"[\")).call(_context2, valueKey, \"]\")), encodeFn(value[valueKey])];\n    });\n  }\n\n  if (explode) {\n    var _context3;\n\n    return _mapInstanceProperty(_context3 = _Object$keys(value)).call(_context3, function (valueKey) {\n      return [encodeKeyFn(valueKey), encodeFn(value[valueKey])];\n    });\n  }\n\n  return [[encodeKeyFn(key), _mapInstanceProperty(_context4 = _Object$keys(value)).call(_context4, function (valueKey) {\n    var _context5;\n\n    return [_concatInstanceProperty(_context5 = \"\".concat(encodeKeyFn(valueKey), \",\")).call(_context5, encodeFn(value[valueKey]))];\n  }).join(',')]];\n}\n\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return _Object$entries(reqForm).reduce(function (formData, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        name = _ref5[0],\n        input = _ref5[1];\n\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator = _createForOfIteratorHelper(formatKeyValue(name, input, true)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            key = _step$value[0],\n            value = _step$value[1];\n\n        if (Array.isArray(value)) {\n          // eslint-disable-next-line no-restricted-syntax\n          var _iterator2 = _createForOfIteratorHelper(value),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var v = _step2.value;\n\n              if (ArrayBuffer.isView(v)) {\n                var blob = new Blob([v]);\n                formData.append(key, blob);\n              } else {\n                formData.append(key, v);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else if (ArrayBuffer.isView(value)) {\n          var _blob = new Blob([value]);\n\n          formData.append(key, _blob);\n        } else {\n          formData.append(key, value);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return formData;\n  }, new FormData());\n} // Encodes an object using appropriate serializer.\n\n\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  var encodedQuery = _Object$keys(data).reduce(function (result, parameterName) {\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator3 = _createForOfIteratorHelper(formatKeyValue(parameterName, data[parameterName])),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _step3$value = _slicedToArray(_step3.value, 2),\n            key = _step3$value[0],\n            value = _step3$value[1];\n\n        result[key] = value;\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    return result;\n  }, {});\n\n  return qs.stringify(encodedQuery, {\n    encode: false,\n    indices: false\n  }) || '';\n} // If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\n\nexport function mergeInQueryOrForm() {\n  var req = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _req$url = req.url,\n      url = _req$url === void 0 ? '' : _req$url,\n      query = req.query,\n      form = req.form;\n\n  var joinSearch = function joinSearch() {\n    for (var _len = arguments.length, strs = new Array(_len), _key = 0; _key < _len; _key++) {\n      strs[_key] = arguments[_key];\n    }\n\n    var search = _filterInstanceProperty(strs).call(strs, function (a) {\n      return a;\n    }).join('&'); // Only truthy value\n\n\n    return search ? \"?\".concat(search) : ''; // Only add '?' if there is a str\n  };\n\n  if (form) {\n    var hasFile = _Object$keys(form).some(function (key) {\n      var value = form[key].value;\n      return isFile(value) || isArrayOfFile(value);\n    });\n\n    var contentType = req.headers['content-type'] || req.headers['Content-Type'];\n\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      var formdata = buildFormData(req.form);\n      foldFormDataToRequest(formdata, req);\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n\n    delete req.form;\n  }\n\n  if (query) {\n    var _url$split = url.split('?'),\n        _url$split2 = _slicedToArray(_url$split, 2),\n        baseUrl = _url$split2[0],\n        oriSearch = _url$split2[1];\n\n    var newStr = '';\n\n    if (oriSearch) {\n      var oriQuery = qs.parse(oriSearch);\n\n      var keysToRemove = _Object$keys(query);\n\n      keysToRemove.forEach(function (key) {\n        return delete oriQuery[key];\n      });\n      newStr = qs.stringify(oriQuery, {\n        encode: true\n      });\n    }\n\n    var finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n\n  return req;\n} // Wrap a http function ( there are otherways to do this, consider this deprecated )\n\nexport function makeHttp(httpFn, preFetch, postFetch) {\n  postFetch = postFetch || function (a) {\n    return a;\n  };\n\n  preFetch = preFetch || function (a) {\n    return a;\n  };\n\n  return function (req) {\n    if (typeof req === 'string') {\n      req = {\n        url: req\n      };\n    }\n\n    self.mergeInQueryOrForm(req);\n    req = preFetch(req);\n    return postFetch(httpFn(req));\n  };\n}"]},"metadata":{},"sourceType":"module"}