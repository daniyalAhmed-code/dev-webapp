{"ast":null,"code":"// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport{apiGatewayClientWithCredentials}from'services/api';import{store}from'services/state';import React from'react';import{Loader,Button,Header,Modal,Icon,Form}from'semantic-ui-react';import{modal}from'components/Modal';import{addNotification}from'components/AlertPopup';import{observer}from'mobx-react';import _ from'lodash';/**\n * This button is used in the `InfoReplacement` component of the SwaggerUiLayout to add the GetSdkButton directly into the SwaggerUi UI.\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const GetSdkButton=observer(()=>{return/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Dropdown,{text:\"Download SDK\",pointing:true,className:\"link item\",children:sdkTypes.map(type=>/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:()=>confirmDownload(type,getSdk),children:type.friendlyName},type.id))}),/*#__PURE__*/_jsx(Dropdown,{text:\"Export API\",pointing:true,className:\"link item\",children:exportTypes.map(type=>/*#__PURE__*/_jsx(\"div\",{className:\"item\",onClick:()=>confirmDownload(type,getExport),children:type.friendlyName},type.id))}),store.api.downloadingSdkOrApi&&/*#__PURE__*/_jsx(Loader,{active:true,inline:true,size:\"tiny\"})]});});class Dropdown extends React.Component{constructor(props){super(props);this.state={visible:false};this.button=+new Date()+'-dropdown-clickable';// we've using this class to exclude certain elements from hiding\nthis.toggleDropdown=()=>this.setState(prevState=>({...prevState,visible:!prevState.visible}));this.hideDropdown=event=>{if(!event.target.classList.contains(this.button)){this.setState(prevState=>({...prevState,visible:false}));}};document.addEventListener('click',this.hideDropdown);}componentWillUnmount(){document.removeEventListener('click',this.hideDropdown);}render(){/* eslint-disable react/jsx-handler-names */return/*#__PURE__*/_jsxs(\"span\",{onClick:this.toggleDropdown,className:'ui button pointing dropdown link item '+this.button+(this.state.visible?' active':''),children:[this.props.text,/*#__PURE__*/_jsx(\"i\",{className:'dropdown icon '+this.button}),/*#__PURE__*/_jsx(\"div\",{className:'menu transition'+(this.state.visible?' visible':''),children:this.props.children})]});/* eslint-enable react/jsx-handler-names */}}function confirmDownload(type,getDownload){if(type.configurationProperties.length){modal.open(/*#__PURE__*/_jsx(GetSdkModal,{type:type,getDownload:getDownload}));}else{getDownload(type.id);}}/**\n * This modal is included by the modals component, which also provides the default open/close controls for all modals.\n */export class GetSdkModal extends React.Component{constructor(props){super(props);// generate a null state value for each required property (to validate against)\nconst fields=props.type.configurationProperties.reduce((obj,property)=>{if(property.type==='checkbox'){obj[property.name]=false;}else if(property.type==='radio'){obj[property.name]=property.default;}else if(property.required){obj[property.name]=null;}return obj;},{});this.state={fields};this.handleChange=(event,_ref)=>{let{name,checked,value}=_ref;this.setState(prevState=>{const prop=this.props.type.configurationProperties.find(property=>property.name===name);const newState=_.cloneDeep(prevState);newState.fields[name]=prop.type==='checkbox'?checked:value;return newState;});};this.handleSubmit=()=>{if(!this.isDisabled().disabled){modal.close();this.props.getDownload(this.props.type.id,this.state.fields);}};}// this function returns a prop directly\n// it's intended to be used like <Component {...this.canSubmit()} />\nisDisabled(){const hasEmptyValue=!!Object.entries(this.state.fields).find(_ref2=>{let[key,value]=_ref2;return value==null||value==='';});return{disabled:hasEmptyValue};}renderProperty(property){if(property.type==='checkbox'){return/*#__PURE__*/_jsx(Form.Checkbox,{name:property.name,label:\"\".concat(property.friendlyName),onChange:this.handleChange});}else if(property.type==='radio'&&property.values.some(value=>property.default===value.name)){return/*#__PURE__*/_jsxs(Form.Group,{inline:true,children:[/*#__PURE__*/_jsx(Form.Field,{children:property.friendlyName}),/*#__PURE__*/_jsx(_Fragment,{children:property.values.map(_ref3=>{let{friendlyName,name}=_ref3;return/*#__PURE__*/_jsx(Form.Radio,{name:property.name,label:\"\".concat(friendlyName),value:name,checked:this.state.fields[property.name]===name,onChange:this.handleChange},name);})})]});}else if(property.required){return/*#__PURE__*/_jsx(Form.Input,{name:property.name,label:\"\".concat(property.friendlyName,\" (required)\"),placeholder:property.friendlyName,onChange:this.handleChange});}else{// only display required fields for now\nreturn null;}}render(){const type=this.props.type;/* eslint-disable react/jsx-closing-bracket-location */ /* eslint-disable react/jsx-closing-tag-location */ /* eslint-disable react/jsx-handler-names */return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{icon:\"archive\",content:\"Download the \".concat(type.longName)}),/*#__PURE__*/_jsx(Modal.Content,{children:/*#__PURE__*/_jsx(Form,{onSubmit:this.handleSubmit,children:type.configurationProperties.map(property=>/*#__PURE__*/_jsx(React.Fragment,{children:this.renderProperty(property)},property.name))})}),/*#__PURE__*/_jsxs(Modal.Actions,{children:[/*#__PURE__*/_jsxs(Button,{basic:true,color:\"red\",onClick:modal.close,children:[/*#__PURE__*/_jsx(Icon,{name:\"remove\"}),\" Cancel\"]}),/*#__PURE__*/_jsxs(Button,{color:\"green\",...this.isDisabled(),onClick:this.handleSubmit,children:[/*#__PURE__*/_jsx(Icon,{name:\"checkmark\"}),\" Download\"]})]})]});/* eslint-enable react/jsx-closing-bracket-location */ /* eslint-enable react/jsx-closing-tag-location */ /* eslint-enable react/jsx-handler-names */}}const sdkTypes=[{id:'android',friendlyName:'Android',longName:'Android SDK',description:'',configurationProperties:[{name:'groupId',friendlyName:'Group ID',description:'',required:true},{name:'invokerPackage',friendlyName:'Invoker package',description:'',required:true},{name:'artifactId',friendlyName:'Artifact ID',description:'',required:true},{name:'artifactVersion',friendlyName:'Artifact version',description:'',required:true}]},{id:'javascript',friendlyName:'JavaScript',longName:'JavaScript SDK',description:'',configurationProperties:[]},{id:'ios-objective-c',friendlyName:'iOS (Objective-C)',longName:'iOS SDK (Objective-C)',description:'',configurationProperties:[{name:'classPrefix',friendlyName:'Prefix',description:'',required:true}]},{id:'ios-swift',friendlyName:'iOS (Swift)',longName:'iOS SDK (Swift)',description:'',configurationProperties:[{name:'classPrefix',friendlyName:'Prefix',description:'',required:true}]},{id:'java',friendlyName:'Java',longName:'Java SDK',description:'Java SDK generator for API Gateway APIs',configurationProperties:[{name:'service.name',friendlyName:'Service Name',description:'Name of the service which is used to derive the Java interface name for your client',required:true},{name:'java.package-name',friendlyName:'Java Package Name',description:'Name of the Java package your code will be generated under',required:true},{name:'java.build-system',friendlyName:'Java Build System',description:'Build system to setup for project; Currently supported: maven, gradle',required:false},{name:'java.group-id',friendlyName:'Java Group Id',description:'Group id for your Maven or Gradle project. Defaults to package name',required:false},{name:'java.artifact-id',friendlyName:'Java Artifact Id',description:'Artifact Id for your Maven project or project name for your Gradle project. Defaults to service name',required:false},{name:'java.artifact-version',friendlyName:'Java Artifact Version',description:'Version of your Maven or Gradle project. Defaults to 1.0-SNAPSHOT',required:false},{name:'java.license-text',friendlyName:'Source Code License Text',description:'Customer provided license to inject into source file headers',required:false}]},{id:'ruby',friendlyName:'Ruby',longName:'Ruby SDK',description:'Ruby SDK generator for API Gateway APIs',configurationProperties:[{name:'service.name',friendlyName:'Service Name',description:'Name of the service which is used to derive the name for your client',required:true},{name:'ruby.gem-name',friendlyName:'Ruby Gem Name',description:'Name of the Ruby gem your code will be generated under',required:false},{name:'ruby.gem-version',friendlyName:'Ruby Gem Version',description:'Version number for your service gem. Defaults to 1.0.0',required:false}]}];const exportTypes=[{id:'oas30',friendlyName:'OpenAPI 3',longName:'OpenAPI 3 definitions',description:'',configurationProperties:[{name:'extensions.integrations',friendlyName:'Include x-amazon-apigateway-integration extensions',description:'',type:'checkbox'},{name:'extensions.authorizers',friendlyName:'Include x-amazon-apigateway-authorizer extensions',description:'',type:'checkbox'},{name:'extensions.postman',friendlyName:'Include extensions to allow importing into Postman',description:'',type:'checkbox'},{name:'accept',friendlyName:'Export format',description:'',type:'radio',default:'application/json',values:[{name:'application/json',friendlyName:'JSON'},{name:'application/yaml',friendlyName:'YAML'}]}]},{id:'swagger',friendlyName:'Swagger 2',longName:'Swagger (OpenAPI 2) definitions',description:'',configurationProperties:[{name:'extensions.integrations',friendlyName:'Include x-amazon-apigateway-integration extensions',description:'',type:'checkbox'},{name:'extensions.authorizers',friendlyName:'Include x-amazon-apigateway-authorizer extensions',description:'',type:'checkbox'},{name:'extensions.postman',friendlyName:'Include extensions to allow importing into Postman',description:'',type:'checkbox'},{name:'accept',friendlyName:'Export format',description:'',type:'radio',default:'application/json',values:[{name:'application/json',friendlyName:'JSON'},{name:'application/yaml',friendlyName:'YAML'}]}]}];/**\n *\n * Let's talk about this for a moment. For some reason, passing data through the server adds (or removes?)\n * an unknown layer of encoding. To get around this, we're converting the file to a datauri on the backend,\n * then sending that through. Kinda unfortunate, because the datauri is larger than the actual encoded file.\n *\n * Eventually, this encoding should be uncovered, and removed or worked around. Once we do that, we will\n * need to switched to requesting a blob, then use a file reader to read the Blob. For now, I'm leaving those\n * in comments so we know how.\n *\n */function fetchBlob(_ref4){let{blobType,endpointName,sdkType,exportType,ext,parameters}=_ref4;const apiId=store.api.apiId||store.api.id;const stageName=store.api.apiStage;store.api.downloadingSdkOrApi=true;return apiGatewayClientWithCredentials().then(apiGatewayClient=>apiGatewayClient.get(\"/catalog/\".concat(apiId,\"_\").concat(stageName,\"/\").concat(endpointName),{sdkType},{},{queryParams:{exportType,parameters:JSON.stringify(parameters)},config:{responseType:'blob'}})).then(_ref5=>{let{data}=_ref5;downloadFile(data,\"\".concat(apiId,\"_\").concat(stageName,\"-\").concat(sdkType||exportType).concat(ext));}).catch(_ref6=>{let{data}=_ref6;return data.text().then(text=>{const result=JSON.parse(text);addNotification({header:\"An error occurred while attempting to download the \".concat(blobType,\".\"),content:result&&result.message});});}).finally(()=>{store.api.downloadingSdkOrApi=false;});}function downloadFile(blob,fileName){const dataUri=URL.createObjectURL(blob);const downloadLinkElement=document.createElement('a');downloadLinkElement.setAttribute('href',dataUri);downloadLinkElement.setAttribute('download',fileName);downloadLinkElement.style.display='none';document.body.appendChild(downloadLinkElement);downloadLinkElement.click();document.body.removeChild(downloadLinkElement);URL.revokeObjectURL(dataUri);}function getSdk(sdkType){let parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return fetchBlob({blobType:'SDK',endpointName:'sdk',ext:'.zip',sdkType,parameters});}function getExport(exportType){let parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(exportType==='oas30'||exportType==='swagger'){const extensions=[];if(parameters['extensions.integrations'])extensions.push('integrations');if(parameters['extensions.authorizers'])extensions.push('authorizers');if(parameters['extensions.postman'])extensions.push('postman');parameters=_.omit(parameters,['extensions.integrations','extensions.authorizers','extensions.postman']);if(extensions.length)parameters.extensions=extensions.join(',');}return fetchBlob({blobType:'API export',endpointName:'export',ext:'.json',exportType,parameters});}","map":{"version":3,"sources":["/home/daniyal/Downloads/vap-webapp (1)/vap-webapp/web-content/static-asset-uploader/src/components/GetSdk.jsx"],"names":["apiGatewayClientWithCredentials","store","React","Loader","Button","Header","Modal","Icon","Form","modal","addNotification","observer","_","GetSdkButton","sdkTypes","map","type","confirmDownload","getSdk","friendlyName","id","exportTypes","getExport","api","downloadingSdkOrApi","Dropdown","Component","constructor","props","state","visible","button","Date","toggleDropdown","setState","prevState","hideDropdown","event","target","classList","contains","document","addEventListener","componentWillUnmount","removeEventListener","render","text","children","getDownload","configurationProperties","length","open","GetSdkModal","fields","reduce","obj","property","name","default","required","handleChange","checked","value","prop","find","newState","cloneDeep","handleSubmit","isDisabled","disabled","close","hasEmptyValue","Object","entries","key","renderProperty","values","some","longName","description","fetchBlob","blobType","endpointName","sdkType","exportType","ext","parameters","apiId","stageName","apiStage","then","apiGatewayClient","get","queryParams","JSON","stringify","config","responseType","data","downloadFile","catch","result","parse","header","content","message","finally","blob","fileName","dataUri","URL","createObjectURL","downloadLinkElement","createElement","setAttribute","style","display","body","appendChild","click","removeChild","revokeObjectURL","extensions","push","omit","join"],"mappings":"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","sourcesContent":["// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { apiGatewayClientWithCredentials } from 'services/api'\nimport { store } from 'services/state'\n\nimport React from 'react'\n\nimport { Loader, Button, Header, Modal, Icon, Form } from 'semantic-ui-react'\nimport { modal } from 'components/Modal'\nimport { addNotification } from 'components/AlertPopup'\n\nimport { observer } from 'mobx-react'\n\nimport _ from 'lodash'\n\n/**\n * This button is used in the `InfoReplacement` component of the SwaggerUiLayout to add the GetSdkButton directly into the SwaggerUi UI.\n */\nexport const GetSdkButton = observer(() => {\n  return (\n    <span>\n      <Dropdown text='Download SDK' pointing className='link item'>\n        {sdkTypes.map((type) => (\n          <div className='item' key={type.id} onClick={() => confirmDownload(type, getSdk)}>\n            {type.friendlyName}\n          </div>\n        ))}\n      </Dropdown>\n      <Dropdown text='Export API' pointing className='link item'>\n        {exportTypes.map((type) => (\n          <div className='item' key={type.id} onClick={() => confirmDownload(type, getExport)}>\n            {type.friendlyName}\n          </div>\n        ))}\n      </Dropdown>\n      {store.api.downloadingSdkOrApi && <Loader active inline size='tiny' />}\n    </span>\n  )\n})\n\nclass Dropdown extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = { visible: false }\n    this.button = +(new Date()) + '-dropdown-clickable' // we've using this class to exclude certain elements from hiding\n\n    this.toggleDropdown = () => this.setState(prevState => ({ ...prevState, visible: !prevState.visible }))\n    this.hideDropdown = event => {\n      if (!event.target.classList.contains(this.button)) { this.setState(prevState => ({ ...prevState, visible: false })) }\n    }\n\n    document.addEventListener('click', this.hideDropdown)\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('click', this.hideDropdown)\n  }\n\n  render () {\n    /* eslint-disable react/jsx-handler-names */\n    return (\n      <span onClick={this.toggleDropdown} className={'ui button pointing dropdown link item ' + this.button + (this.state.visible ? ' active' : '')}>\n        {this.props.text}\n        <i className={'dropdown icon ' + this.button} />\n        <div className={'menu transition' + (this.state.visible ? ' visible' : '')}>\n          {this.props.children}\n        </div>\n      </span>\n    )\n    /* eslint-enable react/jsx-handler-names */\n  }\n}\n\nfunction confirmDownload (type, getDownload) {\n  if (type.configurationProperties.length) {\n    modal.open(<GetSdkModal type={type} getDownload={getDownload} />)\n  } else {\n    getDownload(type.id)\n  }\n}\n\n/**\n * This modal is included by the modals component, which also provides the default open/close controls for all modals.\n */\nexport class GetSdkModal extends React.Component {\n  constructor (props) {\n    super(props)\n\n    // generate a null state value for each required property (to validate against)\n    const fields = props.type.configurationProperties.reduce((obj, property) => {\n      if (property.type === 'checkbox') {\n        obj[property.name] = false\n      } else if (property.type === 'radio') {\n        obj[property.name] = property.default\n      } else if (property.required) {\n        obj[property.name] = null\n      }\n      return obj\n    }, {})\n\n    this.state = {\n      fields\n    }\n\n    this.handleChange = (event, { name, checked, value }) => {\n      this.setState((prevState) => {\n        const prop = this.props.type.configurationProperties.find(property => property.name === name)\n        const newState = _.cloneDeep(prevState)\n        newState.fields[name] = prop.type === 'checkbox' ? checked : value\n        return newState\n      })\n    }\n\n    this.handleSubmit = () => {\n      if (!this.isDisabled().disabled) {\n        modal.close()\n        this.props.getDownload(this.props.type.id, this.state.fields)\n      }\n    }\n  }\n\n  // this function returns a prop directly\n  // it's intended to be used like <Component {...this.canSubmit()} />\n  isDisabled () {\n    const hasEmptyValue = !!Object.entries(this.state.fields)\n      .find(([key, value]) => value == null || value === '')\n\n    return { disabled: hasEmptyValue }\n  }\n\n  renderProperty (property) {\n    if (property.type === 'checkbox') {\n      return (\n        <Form.Checkbox\n          name={property.name}\n          label={`${property.friendlyName}`}\n          onChange={this.handleChange}\n        />\n      )\n    } else if (\n      property.type === 'radio' &&\n      property.values.some(value => property.default === value.name)\n    ) {\n      return (\n        <Form.Group inline>\n          <Form.Field>{property.friendlyName}</Form.Field>\n          <>\n            {property.values.map(({ friendlyName, name }) => (\n              <Form.Radio\n                key={name}\n                name={property.name}\n                label={`${friendlyName}`}\n                value={name}\n                checked={this.state.fields[property.name] === name}\n                onChange={this.handleChange}\n              />\n            ))}\n          </>\n        </Form.Group>\n      )\n    } else if (property.required) {\n      return (\n        <Form.Input\n          name={property.name}\n          label={`${property.friendlyName} (required)`}\n          placeholder={property.friendlyName}\n          onChange={this.handleChange}\n        />\n      )\n    } else {\n      // only display required fields for now\n      return null\n    }\n  }\n\n  render () {\n    const type = this.props.type\n\n    /* eslint-disable react/jsx-closing-bracket-location */\n    /* eslint-disable react/jsx-closing-tag-location */\n    /* eslint-disable react/jsx-handler-names */\n    return <>\n      <Header icon='archive' content={`Download the ${type.longName}`} />\n      <Modal.Content>\n        <Form onSubmit={this.handleSubmit}>\n          {type.configurationProperties.map(property => (\n            <React.Fragment key={property.name}>\n              {this.renderProperty(property)}\n            </React.Fragment>\n          ))}\n        </Form>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button basic color='red' onClick={modal.close}>\n          <Icon name='remove' /> Cancel\n        </Button>\n        <Button color='green' {...this.isDisabled()} onClick={this.handleSubmit}>\n          <Icon name='checkmark' /> Download\n        </Button>\n      </Modal.Actions>\n    </>\n    /* eslint-enable react/jsx-closing-bracket-location */\n    /* eslint-enable react/jsx-closing-tag-location */\n    /* eslint-enable react/jsx-handler-names */\n  }\n}\n\nconst sdkTypes = [\n  {\n    id: 'android',\n    friendlyName: 'Android',\n    longName: 'Android SDK',\n    description: '',\n    configurationProperties: [\n      {\n        name: 'groupId',\n        friendlyName: 'Group ID',\n        description: '',\n        required: true\n      }, {\n        name: 'invokerPackage',\n        friendlyName: 'Invoker package',\n        description: '',\n        required: true\n      }, {\n        name: 'artifactId',\n        friendlyName: 'Artifact ID',\n        description: '',\n        required: true\n      }, {\n        name: 'artifactVersion',\n        friendlyName: 'Artifact version',\n        description: '',\n        required: true\n      }\n    ]\n  },\n  {\n    id: 'javascript',\n    friendlyName: 'JavaScript',\n    longName: 'JavaScript SDK',\n    description: '',\n    configurationProperties: []\n  },\n  {\n    id: 'ios-objective-c',\n    friendlyName: 'iOS (Objective-C)',\n    longName: 'iOS SDK (Objective-C)',\n    description: '',\n    configurationProperties: [\n      {\n        name: 'classPrefix',\n        friendlyName: 'Prefix',\n        description: '',\n        required: true\n      }\n    ]\n  },\n  {\n    id: 'ios-swift',\n    friendlyName: 'iOS (Swift)',\n    longName: 'iOS SDK (Swift)',\n    description: '',\n    configurationProperties: [\n      {\n        name: 'classPrefix',\n        friendlyName: 'Prefix',\n        description: '',\n        required: true\n      }\n    ]\n  },\n  {\n    id: 'java',\n    friendlyName: 'Java',\n    longName: 'Java SDK',\n    description: 'Java SDK generator for API Gateway APIs',\n    configurationProperties: [\n      {\n        name: 'service.name',\n        friendlyName: 'Service Name',\n        description: 'Name of the service which is used to derive the Java interface name for your client',\n        required: true\n      },\n      {\n        name: 'java.package-name',\n        friendlyName: 'Java Package Name',\n        description: 'Name of the Java package your code will be generated under',\n        required: true\n      },\n      {\n        name: 'java.build-system',\n        friendlyName: 'Java Build System',\n        description: 'Build system to setup for project; Currently supported: maven, gradle',\n        required: false\n      },\n      {\n        name: 'java.group-id',\n        friendlyName: 'Java Group Id',\n        description: 'Group id for your Maven or Gradle project. Defaults to package name',\n        required: false\n      },\n      {\n        name: 'java.artifact-id',\n        friendlyName: 'Java Artifact Id',\n        description: 'Artifact Id for your Maven project or project name for your Gradle project. Defaults to service name',\n        required: false\n      },\n      {\n        name: 'java.artifact-version',\n        friendlyName: 'Java Artifact Version',\n        description: 'Version of your Maven or Gradle project. Defaults to 1.0-SNAPSHOT',\n        required: false\n      },\n      {\n        name: 'java.license-text',\n        friendlyName: 'Source Code License Text',\n        description: 'Customer provided license to inject into source file headers',\n        required: false\n      }\n    ]\n  },\n  {\n    id: 'ruby',\n    friendlyName: 'Ruby',\n    longName: 'Ruby SDK',\n    description: 'Ruby SDK generator for API Gateway APIs',\n    configurationProperties: [\n      {\n        name: 'service.name',\n        friendlyName: 'Service Name',\n        description: 'Name of the service which is used to derive the name for your client',\n        required: true\n      },\n      {\n        name: 'ruby.gem-name',\n        friendlyName: 'Ruby Gem Name',\n        description: 'Name of the Ruby gem your code will be generated under',\n        required: false\n      },\n      {\n        name: 'ruby.gem-version',\n        friendlyName: 'Ruby Gem Version',\n        description: 'Version number for your service gem. Defaults to 1.0.0',\n        required: false\n      }\n    ]\n  }\n]\n\nconst exportTypes = [\n  {\n    id: 'oas30',\n    friendlyName: 'OpenAPI 3',\n    longName: 'OpenAPI 3 definitions',\n    description: '',\n    configurationProperties: [\n      {\n        name: 'extensions.integrations',\n        friendlyName: 'Include x-amazon-apigateway-integration extensions',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'extensions.authorizers',\n        friendlyName: 'Include x-amazon-apigateway-authorizer extensions',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'extensions.postman',\n        friendlyName: 'Include extensions to allow importing into Postman',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'accept',\n        friendlyName: 'Export format',\n        description: '',\n        type: 'radio',\n        default: 'application/json',\n        values: [\n          { name: 'application/json', friendlyName: 'JSON' },\n          { name: 'application/yaml', friendlyName: 'YAML' }\n        ]\n      }\n    ]\n  },\n  {\n    id: 'swagger',\n    friendlyName: 'Swagger 2',\n    longName: 'Swagger (OpenAPI 2) definitions',\n    description: '',\n    configurationProperties: [\n      {\n        name: 'extensions.integrations',\n        friendlyName: 'Include x-amazon-apigateway-integration extensions',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'extensions.authorizers',\n        friendlyName: 'Include x-amazon-apigateway-authorizer extensions',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'extensions.postman',\n        friendlyName: 'Include extensions to allow importing into Postman',\n        description: '',\n        type: 'checkbox'\n      },\n      {\n        name: 'accept',\n        friendlyName: 'Export format',\n        description: '',\n        type: 'radio',\n        default: 'application/json',\n        values: [\n          { name: 'application/json', friendlyName: 'JSON' },\n          { name: 'application/yaml', friendlyName: 'YAML' }\n        ]\n      }\n    ]\n  }\n]\n\n/**\n *\n * Let's talk about this for a moment. For some reason, passing data through the server adds (or removes?)\n * an unknown layer of encoding. To get around this, we're converting the file to a datauri on the backend,\n * then sending that through. Kinda unfortunate, because the datauri is larger than the actual encoded file.\n *\n * Eventually, this encoding should be uncovered, and removed or worked around. Once we do that, we will\n * need to switched to requesting a blob, then use a file reader to read the Blob. For now, I'm leaving those\n * in comments so we know how.\n *\n */\n\nfunction fetchBlob ({ blobType, endpointName, sdkType, exportType, ext, parameters }) {\n  const apiId = store.api.apiId || store.api.id\n  const stageName = store.api.apiStage\n\n  store.api.downloadingSdkOrApi = true\n\n  return apiGatewayClientWithCredentials()\n    .then(apiGatewayClient => apiGatewayClient.get(\n      `/catalog/${apiId}_${stageName}/${endpointName}`,\n      { sdkType },\n      {},\n      {\n        queryParams: { exportType, parameters: JSON.stringify(parameters) },\n        config: { responseType: 'blob' }\n      }\n    ))\n    .then(({ data }) => {\n      downloadFile(data, `${apiId}_${stageName}-${sdkType || exportType}${ext}`)\n    })\n    .catch(({ data }) => data.text().then(text => {\n      const result = JSON.parse(text)\n      addNotification({ header: `An error occurred while attempting to download the ${blobType}.`, content: result && result.message })\n    }))\n    .finally(() => {\n      store.api.downloadingSdkOrApi = false\n    })\n}\n\nfunction downloadFile (blob, fileName) {\n  const dataUri = URL.createObjectURL(blob)\n  const downloadLinkElement = document.createElement('a')\n  downloadLinkElement.setAttribute('href', dataUri)\n  downloadLinkElement.setAttribute('download', fileName)\n  downloadLinkElement.style.display = 'none'\n\n  document.body.appendChild(downloadLinkElement)\n  downloadLinkElement.click()\n  document.body.removeChild(downloadLinkElement)\n  URL.revokeObjectURL(dataUri)\n}\n\nfunction getSdk (sdkType, parameters = {}) {\n  return fetchBlob({\n    blobType: 'SDK',\n    endpointName: 'sdk',\n    ext: '.zip',\n    sdkType,\n    parameters\n  })\n}\n\nfunction getExport (exportType, parameters = {}) {\n  if (exportType === 'oas30' || exportType === 'swagger') {\n    const extensions = []\n    if (parameters['extensions.integrations']) extensions.push('integrations')\n    if (parameters['extensions.authorizers']) extensions.push('authorizers')\n    if (parameters['extensions.postman']) extensions.push('postman')\n    parameters = _.omit(parameters, [\n      'extensions.integrations',\n      'extensions.authorizers',\n      'extensions.postman'\n    ])\n    if (extensions.length) parameters.extensions = extensions.join(',')\n  }\n\n  return fetchBlob({\n    blobType: 'API export',\n    endpointName: 'export',\n    ext: '.json',\n    exportType,\n    parameters\n  })\n}\n"]},"metadata":{},"sourceType":"module"}