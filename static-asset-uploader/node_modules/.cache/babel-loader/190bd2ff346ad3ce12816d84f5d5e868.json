{"ast":null,"code":"import React,{useMemo,useState}from'react';import{Link}from'react-router-dom';import'./style.css';// semantic-ui\n// import { Container, Card, Divider } from 'semantic-ui-react'\n// store\nimport{useObserver}from'mobx-react';import{store}from'services/state';// utilities\nimport _ from'lodash';import{isRegistered,getLoginRedirectUrl}from'../../services/self';import{cognitoDomain,cognitoClientId}from'../../services/api';import{updateUsagePlansAndApisList}from'../../services/api-catalog';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getCognitoUrl(type){const redirectUri=getLoginRedirectUrl();return\"\".concat(cognitoDomain,\"/\").concat(type,\"?response_type=token&client_id=\").concat(cognitoClientId,\"&redirect_uri=\").concat(redirectUri);}function getApisCustom(){const apiList=[].concat(_.get(store,'apiList.generic',[]),_.get(store,'apiList.apiGateway',[])).map(api=>({group:api.apiId||api.id,id:api.apiStage||api.id,description:api.swagger.info.description,title:api.swagger.info.title,route:\"/apis/\".concat(api.id)+(api.apiStage?'/'+api.apiStage:''),stage:api.apiStage}));return apiList;}getApisCustom();export function getApi(){let cacheBust=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return updateUsagePlansAndApisList(cacheBust).then(()=>{// let thisApi\nconst allApis=[].concat(store.apiList.apiGateway,store.apiList.generic);// if (allApis.length) {\n//   if (apiId === 'ANY' || apiId === 'FIRST') {\n//     thisApi = allApis[0]\n//   } else {\n//     thisApi = allApis.find(api => (api.apiId === apiId && api.apiStage === stage))\n//     if (!thisApi) {\n//       thisApi = allApis.find(api => (api.id.toString() === apiId))\n//     }\n//   }\n// }\n// if (selectIt) store.api = thisApi\nreturn allApis;});}export default function ApiListItem(){const isLoaded=useObserver(()=>store.apiList!=null&&store.apiList.loaded);const dataSet=useMemo(()=>!store.apiList?[]:[...store.apiList.apiGateway.map(_ref=>{let{id,apiStage:stage,swagger,usagePlan}=_ref;return{url:\"/apis/\".concat(id,\"/\").concat(stage),title:\"\".concat(swagger.info.title,\" - \").concat(stage),stage:\"\".concat(stage),description:swagger.info.description?\"\".concat(swagger.info.description):''};}),...store.apiList.generic.map(_ref2=>{let{id,swagger,apiStage:stage}=_ref2;const api={url:\"/apis/\".concat(id),title:stage?\"\".concat(swagger.info.title,\" - \").concat(stage):\"\".concat(swagger.info.title),description:swagger.info.description?\"\".concat(swagger.info.description):''};if(stage)api.stage=stage;return api;})],[isLoaded]);// changed-eslint-disable-line chNGED-react-hooks/exhaustive-deps\nconst[searchField,setSearchField]=useState('');const filteredApiList=dataSet.filter(api=>api.title.toLowerCase().includes(searchField));const apiList=filteredApiList.map(api=>/*#__PURE__*/_jsxs(Link,{to:isRegistered()?api.url:getCognitoUrl('login'),class:\"data-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:api.title}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"stage: \",api.stage]}),/*#__PURE__*/_jsx(\"p\",{children:api.description.slice(0,150).concat('...')}),/*#__PURE__*/_jsxs(\"span\",{class:\"link-text\",children:[\"View API\",/*#__PURE__*/_jsx(\"svg\",{width:\"25\",height:\"16\",viewBox:\"0 0 25 16\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",d:\"M17.8631 0.929124L24.2271 7.29308C24.6176 7.68361 24.6176 8.31677 24.2271 8.7073L17.8631 15.0713C17.4726 15.4618 16.8394 15.4618 16.4489 15.0713C16.0584 14.6807 16.0584 14.0476 16.4489 13.657L21.1058 9.00019H0.47998V7.00019H21.1058L16.4489 2.34334C16.0584 1.95281 16.0584 1.31965 16.4489 0.929124C16.8394 0.538599 17.4726 0.538599 17.8631 0.929124Z\",fill:\"#01bf71\"})})]})]},api.id));return/*#__PURE__*/_jsxs(\"section\",{className:\"api-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search__container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"search__title\",children:\"Search API List...\"}),/*#__PURE__*/_jsx(\"input\",{className:\"search__input\",type:\"text\",placeholder:\"Search API...\",onChange:e=>setSearchField(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__group\",children:apiList})]});}","map":{"version":3,"sources":["/home/daniyal/Downloads/vap-webapp (1)/vap-webapp/web-content/static-asset-uploader/src/componentsNew/ApiListItem/index.js"],"names":["React","useMemo","useState","Link","useObserver","store","_","isRegistered","getLoginRedirectUrl","cognitoDomain","cognitoClientId","updateUsagePlansAndApisList","getCognitoUrl","type","redirectUri","getApisCustom","apiList","concat","get","map","api","group","apiId","id","apiStage","description","swagger","info","title","route","stage","getApi","cacheBust","then","allApis","apiGateway","generic","ApiListItem","isLoaded","loaded","dataSet","usagePlan","url","searchField","setSearchField","filteredApiList","filter","toLowerCase","includes","slice","e","target","value"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport './style.css'\n\n// semantic-ui\n// import { Container, Card, Divider } from 'semantic-ui-react'\n\n// store\nimport { useObserver } from 'mobx-react'\nimport { store } from 'services/state'\n\n// utilities\nimport _ from 'lodash'\nimport {\n  isRegistered,\n  getLoginRedirectUrl\n} from '../../services/self'\nimport { cognitoDomain, cognitoClientId } from '../../services/api'\nimport { updateUsagePlansAndApisList } from '../../services/api-catalog'\n\nfunction getCognitoUrl (type) {\n  const redirectUri = getLoginRedirectUrl()\n  return `${cognitoDomain}/${type}?response_type=token&client_id=${cognitoClientId}&redirect_uri=${redirectUri}`\n}\n\nfunction getApisCustom () {\n  const apiList = [].concat(_.get(store, 'apiList.generic', []), _.get(store, 'apiList.apiGateway', [])).map(api => ({\n    group: api.apiId || api.id,\n    id: api.apiStage || api.id,\n    description: api.swagger.info.description,\n    title: api.swagger.info.title,\n    route: `/apis/${api.id}` + (api.apiStage ? '/' + api.apiStage : ''),\n    stage: api.apiStage\n  }))\n  return apiList\n}\ngetApisCustom()\n\nexport function getApi (cacheBust = false) {\n  return updateUsagePlansAndApisList(cacheBust)\n    .then(() => {\n      // let thisApi\n\n      const allApis = [].concat(store.apiList.apiGateway, store.apiList.generic)\n\n      // if (allApis.length) {\n      //   if (apiId === 'ANY' || apiId === 'FIRST') {\n      //     thisApi = allApis[0]\n      //   } else {\n      //     thisApi = allApis.find(api => (api.apiId === apiId && api.apiStage === stage))\n\n      //     if (!thisApi) {\n      //       thisApi = allApis.find(api => (api.id.toString() === apiId))\n      //     }\n      //   }\n      // }\n      // if (selectIt) store.api = thisApi\n      return allApis\n    })\n}\n\nexport default function ApiListItem () {\n  const isLoaded = useObserver(() => store.apiList != null && store.apiList.loaded)\n  const dataSet = useMemo(() => !store.apiList ? [] : [\n    ...store.apiList.apiGateway.map(({ id, apiStage: stage, swagger, usagePlan }) => ({\n      url: `/apis/${id}/${stage}`,\n      title: `${swagger.info.title} - ${stage}`,\n      stage: `${stage}`,\n      description: swagger.info.description ? `${swagger.info.description}` : ''\n    })),\n    ...store.apiList.generic.map(({ id, swagger, apiStage: stage }) => {\n      const api = {\n        url: `/apis/${id}`,\n        title: stage ? `${swagger.info.title} - ${stage}` : `${swagger.info.title}`,\n        description: swagger.info.description ? `${swagger.info.description}` : ''\n      }\n      if (stage) api.stage = stage\n      return api\n    })\n  ], [isLoaded]) // changed-eslint-disable-line chNGED-react-hooks/exhaustive-deps\n\n  const [searchField, setSearchField] = useState('')\n  const filteredApiList = dataSet.filter(api => api.title.toLowerCase().includes(searchField))\n\n  const apiList = filteredApiList.map(api => (\n    <Link to= {isRegistered() ? api.url : getCognitoUrl('login') } class=\"data-card\" key= {api.id }>\n      <h3>{api.title}</h3>\n      <h4>stage: {api.stage}</h4>\n      <p>{api.description.slice(0, 150).concat('...')}</p>\n      <span class=\"link-text\">\n        View API\n        <svg width=\"25\" height=\"16\" viewBox=\"0 0 25 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.8631 0.929124L24.2271 7.29308C24.6176 7.68361 24.6176 8.31677 24.2271 8.7073L17.8631 15.0713C17.4726 15.4618 16.8394 15.4618 16.4489 15.0713C16.0584 14.6807 16.0584 14.0476 16.4489 13.657L21.1058 9.00019H0.47998V7.00019H21.1058L16.4489 2.34334C16.0584 1.95281 16.0584 1.31965 16.4489 0.929124C16.8394 0.538599 17.4726 0.538599 17.8631 0.929124Z\" fill=\"#01bf71\"/>\n        </svg>\n      </span>\n    </Link>\n  ))\n\n  return (\n    <section className=\"api-wrapper\">\n      <div className=\"search__container\">\n        <p className=\"search__title\">\n       Search API List...\n        </p>\n        <input\n          className=\"search__input\"\n          type=\"text\"\n          placeholder=\"Search API...\"\n          onChange={ e => setSearchField(e.target.value)}\n        />\n      </div>\n      <div className=\"card__group\">\n        {apiList}\n      </div>\n    </section>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}